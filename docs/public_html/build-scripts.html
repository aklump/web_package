
<!DOCTYPE html>

<html>
<head>
    <title>Timesaving hooks: build, unbuild, dev</title>
    <link href="search/tipuesearch.css" rel="stylesheet">
    <style type="text/css" media="all">
      @import url("style.css");
    </style>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="search/tipuesearch_content.js"></script>
    <script src="search/tipuesearch_set.js"></script>
    <script src="search/tipuesearch.min.js"></script>
    <script src="js/core.js"></script>

</head>

<body class="page-build-scripts">
<header>
<div class="pager">
  <a href="README.html" class="prev README">&laquo;README</a>
  <a href="index.html" class="index">Index</a>
  <a href="config.html" class="next config">Configuration&raquo;</a>
</div>

</header>

<div class="search__wrapper">
  <form action="search--results.html">
    <input type="text" class="search-input" name="q" id="tipue_search_input" autocomplete="off" required>
  </form>
</div>

<h1>Timesaving hooks: build, unbuild, dev</h1>
<div class="breadcrumb"><a href="index.html">Index</a></div>

<section>


<p>There are three commands that are important to know about.  On their own, that is without special implementation, they do nothing.  However they can be configured to help your process out and save time and reduce errors</p>

<h2><code>bump build</code></h2>

<p>Scripts added to <code>.web_package/hooks/build</code> are run.  By design, these scripts should serve the purpose of building the package and making it ready for a release.  Such as create a <code>dist</code> directory and copy over distribution files, etc.  **Of the three, this is the only command that is automatically called by calling <code>bump done</code>.</p>

<h2><code>bump unbuild</code></h2>

<p>Scripts added to <code>.web_package/hooks/unbuild</code> are run.  You may delete files as necessary to reverse the build step.  May not be that useful for most.</p>

<h2><code>bump dev</code></h2>

<p>Scripts added to <code>.web_package/hooks/dev</code> are run.  The intention here is to set up the project to be developed.  I use this to symlink dependencies during development.  These symlinks get reversed in my build scripts.</p>

<h2>Build Scripts</h2>

<p>You may add php or shell scripts to <code>.web_package/hooks/build</code> and they will be run each time the version increments.  You may also trigger a build by calling <code>bump build</code>.</p>

<p>You can also trigger a single file by passing it's filename; you would want to do this if you need to trigger this one script from an external program, while preserving the callback arguments.  Here is an example (this also works for unbuild and dev):</p>

<pre><code>    bump build only_this_script.sh
</code></pre>

<p>Any file ending in <code>.php</code> or <code>.sh</code> found in the build script folder will be called during version bumping.  Refer to the parameter chart below for script arguments:</p>

<p>One example of using a build script, say with a jQuery plugin, is when you want to embed the version string <em>inside</em> the <code>jquery.pluging_name.js</code> file.  In such a case the  <code>.info</code> file strategy doesn't meet your needs.  For such a scenario you would use a build script.</p>

<h2>Callback Arguments</h2>

<table>
<thead>
<tr>
  <th>data</th>
  <th>build.php</th>
  <th>build.sh</th>
</tr>
</thead>
<tbody>
<tr>
  <td>prev version</td>
  <td>$argv[1]</td>
  <td>$1</td>
</tr>
<tr>
  <td>new version</td>
  <td>$argv[2]</td>
  <td>$2</td>
</tr>
<tr>
  <td>package name</td>
  <td>$argv[3]</td>
  <td>$3</td>
</tr>
<tr>
  <td>description</td>
  <td>$argv[4]</td>
  <td>$4</td>
</tr>
<tr>
  <td>homepage</td>
  <td>$argv[5]</td>
  <td>$5</td>
</tr>
<tr>
  <td>author</td>
  <td>$argv[6]</td>
  <td>$6</td>
</tr>
<tr>
  <td>path to root</td>
  <td>$argv[7]</td>
  <td>$7</td>
</tr>
<tr>
  <td>date/time</td>
  <td>$argv[8]</td>
  <td>$8</td>
</tr>
<tr>
  <td>path to info file</td>
  <td>$argv[9]</td>
  <td>$9</td>
</tr>
<tr>
  <td>dir of the script</td>
  <td>$argv[10]</td>
  <td>${10}</td>
</tr>
<tr>
  <td>dir of functions.php/.sh</td>
  <td>$argv[11]</td>
  <td>${11}</td>
</tr>
<tr>
  <td>root dir of web_package</td>
  <td>$argv[12]</td>
  <td>${12}</td>
</tr>
<tr>
  <td>path to hooks dir</td>
  <td>$argv[13]</td>
  <td>${13}</td>
</tr>
</tbody>
</table>

<ul>
<li>Your script should print/echo details as to what it did; this will be output to the console.</li>
<li>Be sure to use <em>path to root</em> in your scripts when you reference any files in your project.</li>
<li><p>If you need to source another script, e.g. <code>config</code> that sits in your scripts directory, use <code>dir of the script</code>, here's a shell example...  Notice that without the <code>.sh</code> extension, the file will not automatically get called, which is a good way to do a shared config script.</p>

<pre><code>#!/bin/bash
source "${10}/config"
source "${11}/functions.sh"
...
</code></pre></li>
</ul>
</section>

<div class="search__results">
  <div id="tipue_search_content"></div>  
</div>

<footer>
<div class="pager">
  <a href="README.html" class="prev README">&laquo;README</a>
  <a href="index.html" class="index">Index</a>
  <a href="config.html" class="next config">Configuration&raquo;</a>
</div>


  <div id="footer-legaleeze">
    <p class="legaleeze center">Version: 2.1.14 &bull; Last Updated: Thu, 29 Dec 2016 15:43:14 -0800</p>
  </div>
</footer>

<script>
$(document).ready(function() {
  $('#tipue_search_input').tipuesearch();
});
</script>

</body>
</html>

